{"version":3,"sources":["components/Person.js","components/Filter.js","components/PersonForm.js","services/persons.js","components/Notification.js","components/ErrorNotification.js","app.js","index.js"],"names":["Person","props","name","number","onClick","deletePerson","id","Filter","value","filter","onChange","handleFilterChange","PersonForm","onSubmit","addContact","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","ErrorNotification","errorMessage","App","useState","persons","setPersons","setNewName","setNewNumber","setFilter","setMessage","setErrorMessage","contactsToShow","person","toLowerCase","startsWith","toLocaleLowerCase","useEffect","personService","initialPersons","console","log","length","window","confirm","event","target","preventDefault","Nameexists","Numexists","alert","find","changedPerson","returnedPerson","map","catch","setTimeout","concat","error","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b9d67a5c.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = (props) => {\n    return(\n    <div>\n    {props.name} {props.number} <button onClick={() => props.deletePerson(props.name,props.id)}> delete </button> \n    </div>\n    )\n  }\n\n  export default Person\n\n","import React from 'react'\n\nconst Filter = (props) => {\n       return (\n        <div>\n          filter shown with <input \n            value={props.filter}\n            onChange={props.handleFilterChange}\n          />\n         </div>\n       )\n}\n\nexport default Filter","import React  from 'react'\n\nconst PersonForm = (props) => {\n return(\n        <form onSubmit = {props.addContact}>\n          <div>\n            name: <input\n            value={props.newName}\n            onChange={props.handleNameChange}\n             />\n          </div>\n          <div>\n             number: <input\n             value={props.newNumber}\n             onChange={props.handleNumberChange}\n             />\n          </div>\n          <div>\n            <button type=\"submit\">add</button>\n          </div>\n        </form>\n )\n}\n\nexport default PersonForm","import axios from 'axios'\n\n//const baseUrl = 'http://localhost:3001/api/persons'\nconst baseUrl = '/api/persons'\n\nconst getAll =()=> {\n    const request = axios.get(baseUrl)\n    return request.then(response=>response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl,newObject)\n    return request.then(response=>response.data)\n}\n\nconst update = (id, newObject) => {\n    const request=  axios.put(`${baseUrl}/${id}`,newObject)\n    return request.then(response=>response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request.then(response=>response.data)\n}\n\nexport default {getAll, create, update, remove}","import React from 'react'\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"notification\">\n        {message}\n      </div>\n    )\n  }\n\n  export default Notification","import React from 'react'\n\nconst ErrorNotification = ({ errorMessage }) => {\n    if (errorMessage === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {errorMessage}\n      </div>\n    )\n  }\n\n  export default ErrorNotification","import React, { useState, useEffect } from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\nimport ErrorNotification from './components/ErrorNotification'\n\n\nconst App = () => {\n    \n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('') \n  const [newNumber, setNewNumber] =useState('') \n  const [filter,setFilter] = useState('')\n  const [message,setMessage]= useState(null)\n  const [errorMessage,setErrorMessage]= useState(null)\n\n\n  const contactsToShow = persons.filter(person => person.name.toLowerCase().startsWith(filter.toLocaleLowerCase()));\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const addContact = (event) => {\n    event.preventDefault()\n\n    const Nameexists = persons.filter(person =>person.name === newName).length >0;\n    const Numexists = persons.filter(person =>person.number === newNumber).length >0;\n\n    if(Nameexists && Numexists){\n      window.alert(`${newName} is already added to phonebook`)\n    }\n    else if(Nameexists) {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n      const person = persons.find(person =>person.name ===newName);\n      const changedPerson = {...person, number: newNumber};\n      const id =changedPerson.id\n\n      personService\n      .update(id,changedPerson)\n        .then(returnedPerson=> {\n          setPersons(persons.map(person=> person.id !== id ? person: returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessage(`Updated '${newName}'`)\n        })\n        .catch(returnedPerson => {\n          setErrorMessage(`Information of '${newName}' has already been removed from server`)\n          console.log('catch!')\n        })        \n        setTimeout(() => {\n          setMessage(null)\n        }, 3000)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n      }\n    }\n    else if (!Nameexists) {\n      const personObject = {\n      name: newName,\n      number: newNumber,\n     // id: persons.length+1,\n      }\n      personService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessage(`Added '${newName}'`)\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000)\n        })\n        .catch(error => {\n          console.log(`error.response.data: ${error.response.data}`)\n          console.log(`error: ${error}`)\n          console.log(`error.response: ${error.response}`)\n          setErrorMessage(`${error.response.data.error}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 3000)\n        })\n\n\n    }\n  }\n    \n  const deletePerson = (name,id) => {\n    if(window.confirm(`Delete ${name}?`)){\n      personService.remove(id)\n      .then(()=>{\n        setPersons(persons.filter(person=>person.id !== id));\n      })\n    }\n}\n\n\n  const handleNameChange = (event) => {\n      setNewName(event.target.value)\n    }\n\n  const handleNumberChange= (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange= (event) => {\n    setFilter(event.target.value)\n  }\n\n    return (\n      <div>\n        <h2>Phonebook</h2>\n        <ErrorNotification errorMessage={errorMessage} />\n        <Notification message={message} />\n        <Filter filter={filter} handleFilterChange={handleFilterChange} />\n        <h2>add a new</h2>\n        <PersonForm addContact = {addContact} handleNameChange = {handleNameChange} handleNumberChange = {handleNumberChange} newName = {newName} newNumber={newNumber} />\n        <h2>Numbers</h2>\n         {contactsToShow.map(person => \n         <Person key = {person.id} name={person.name} id={person.id} number={person.number} deletePerson ={deletePerson} />\n         )} \n      </div>\n    )\n    }\n    \n    export default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport './index.css';\n\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n\n"],"sourceRoot":""}